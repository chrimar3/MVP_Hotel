<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üè® Hotel Review Generator</title>
    
    <style>
        :root {
            --primary: #1e40af;
            --primary-dark: #1e3a8a;
            --success: #059669;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #ffffff;
            --bg-light: #f9fafb;
            --border: #e5e7eb;
            --touch-target: 44px;
            --max-width: 480px;
            --border-radius: 0.5rem;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg-light);
            padding: 1rem;
            min-height: 100vh;
        }

        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            background: var(--bg);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Header */
        header {
            background: var(--primary);
            color: white;
            text-align: center;
            padding: 1.5rem;
        }

        .hotel-logo {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hotel-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        .hotel-logo svg {
            width: 32px;
            height: 32px;
            fill: rgba(255, 255, 255, 0.8);
        }

        header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        /* Main Content */
        main {
            padding: 1.5rem;
        }

        section {
            margin-bottom: 2rem;
        }

        section:last-child {
            margin-bottom: 0;
        }

        h2 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text);
        }

        /* Checkbox Grid */
        .checkbox-grid {
            display: grid;
            gap: 0.75rem;
        }

        .checkbox-item {
            min-height: var(--touch-target);
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background: var(--bg-light);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .checkbox-item:hover {
            background: #f3f4f6;
        }

        .checkbox-item.checked {
            background: #eff6ff;
            border-color: var(--primary);
        }

        .checkbox-item input {
            margin-right: 0.75rem;
            transform: scale(1.2);
        }

        .checkbox-item label {
            flex: 1;
            font-size: 0.95rem;
            cursor: pointer;
        }

        /* Form Inputs */
        input[type="text"], textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.2s ease;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.95rem;
        }

        /* Buttons */
        button {
            min-height: var(--touch-target);
            width: 100%;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
            -webkit-tap-highlight-color: transparent;
        }

        button:hover {
            background: var(--primary-dark);
        }

        button:active {
            transform: translateY(1px);
        }

        button.secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            margin-top: 0.75rem;
        }

        button.secondary:hover {
            background: var(--bg-light);
        }

        /* Review Output */
        #review-output {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid var(--border);
        }

        #review-text {
            background: white;
            border: 2px solid var(--border);
            padding: 1rem;
            border-radius: var(--border-radius);
            white-space: pre-wrap;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .platform-buttons {
            display: grid;
            gap: 0.75rem;
        }

        .platform-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem;
            background: var(--success);
            color: white;
            text-decoration: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: background-color 0.2s ease;
        }

        .platform-btn:hover {
            background: #047857;
        }

        .platform-btn.secondary {
            background: white;
            color: var(--text);
            border: 2px solid var(--border);
        }

        .platform-btn.secondary:hover {
            background: var(--bg-light);
        }

        /* Secondary Platforms */
        #secondary-platforms {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        #secondary-platforms p {
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 500;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        /* Utility Classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            body {
                padding: 0.5rem;
            }
            
            main {
                padding: 1rem;
            }
            
            header {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="hotel-logo">
                <img id="hotel-logo-img" src="" alt="Hotel Logo" style="display: none;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <svg viewBox="0 0 24 24" style="display: block;">
                    <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM10 6a2 2 0 0 1 4 0v1h-4V6zm8 13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v10z"/>
                    <circle cx="12" cy="15" r="2"/>
                </svg>
            </div>
            <h1>üè® <span id="hotel-name">Acme Hotel</span></h1>
            <p>Thank you for staying with us!</p>
        </header>
        
        <!-- Main Form -->
        <main>
            <!-- Positive Aspects Section -->
            <section class="aspects">
                <h2>What did you enjoy about your stay?</h2>
                <div class="checkbox-grid" id="aspects-grid">
                    <!-- Generated dynamically -->
                </div>
            </section>
            
            <!-- Staff Recognition (Optional) -->
            <section class="staff">
                <label for="staff-name">Want to recognize a staff member? (optional)</label>
                <input type="text" id="staff-name" placeholder="e.g., Sarah at reception was amazing">
            </section>
            
            <!-- Additional Comments (Optional) -->
            <section class="comments">
                <label for="comments">Any additional comments? (optional)</label>
                <textarea id="comments" placeholder="Tell us more about what made your stay special..."></textarea>
            </section>
            
            <!-- Generate Button -->
            <button id="generate-btn">‚ú® Generate My Review</button>
            
            <!-- Review Output (Initially Hidden) -->
            <section id="review-output" class="hidden">
                <h2>Your Personalized Review</h2>
                <div id="review-text"></div>
                
                <div class="platform-buttons">
                    <button id="copy-btn">üìã Copy to Clipboard</button>
                    <a id="primary-platform" class="platform-btn" target="_blank" rel="noopener">
                        Go to Platform
                    </a>
                </div>
                
                <!-- Secondary Platforms -->
                <div id="secondary-platforms" class="hidden">
                    <p>Also consider sharing on:</p>
                    <div id="secondary-buttons"></div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Toast Notification -->
    <div id="notification" class="toast hidden">üìã Copied to clipboard!</div>

    <script>
        // Configuration
        const CONFIG = {
            // Hotel Information
            hotelName: "Acme Hotel",
            hotelLogo: "", // Set to actual logo URL, e.g., "https://yourhotel.com/logo.png"
            
            // Positive Aspects (checkbox options)
            aspects: {
                'clean-rooms': 'The rooms were spotlessly clean and well-maintained',
                'comfortable-beds': 'The beds were incredibly comfortable with high-quality linens',
                'great-location': 'The location was perfect for exploring the area',
                'friendly-staff': 'The staff were exceptionally friendly and helpful throughout our stay',
                'excellent-breakfast': 'The breakfast was delicious with great variety and fresh options',
                'great-value': 'Excellent value for money with outstanding service',
                'quiet-peaceful': 'The hotel was wonderfully quiet and peaceful',
                'modern-amenities': 'The amenities were modern and well-maintained'
            },
            
            // Review Templates (randomized for variety)
            openings: [
                'Had a wonderful stay at',
                'Really enjoyed our time at',
                'Excellent experience at',
                'Very pleased with our stay at',
                'Outstanding service at',
                'Thoroughly enjoyed our visit to'
            ],
            
            closings: [
                'Highly recommend this hotel to anyone visiting the area!',
                'Would definitely stay again on our next visit!',
                'Will certainly return and recommend to friends and family.',
                'Can\'t wait to come back for another stay!',
                'This hotel exceeded our expectations in every way.',
                'A truly memorable stay that we\'ll cherish.'
            ],
            
            // Platform Configuration
            platforms: {
                booking: {
                    name: 'Booking.com',
                    url: 'https://www.booking.com/reviewlist.html',
                    emoji: 'üè®'
                },
                expedia: {
                    name: 'Expedia',
                    url: 'https://www.expedia.com/user/account/trips',
                    emoji: '‚úàÔ∏è'
                },
                tripadvisor: {
                    name: 'TripAdvisor',
                    url: 'https://www.tripadvisor.com/UserReviewEdit',
                    emoji: 'ü¶â'
                },
                google: {
                    name: 'Google Maps',
                    url: 'https://maps.google.com',
                    emoji: 'üó∫Ô∏è'
                }
            },
            
            // Routing Rules (based on booking source)
            routingRules: {
                direct: {  // Includes walk-in guests and direct bookings
                    primary: 'tripadvisor',
                    secondary: ['google']
                },
                booking: {
                    primary: 'booking',
                    secondary: ['tripadvisor', 'google']
                },
                expedia: {
                    primary: 'expedia',
                    secondary: ['tripadvisor', 'google']
                }
            }
        };

        // Booking Detector Module
        const BookingDetector = {
            getSource() {
                const params = new URLSearchParams(window.location.search);
                const source = params.get('source');
                return CONFIG.routingRules[source] ? source : 'direct';
            },
            
            getPlatformRouting() {
                const source = this.getSource();
                return CONFIG.routingRules[source];
            }
        };

        // Review Builder Module
        const ReviewBuilder = {
            generate() {
                const aspects = this.getSelectedAspects();
                const staffName = document.getElementById('staff-name').value.trim();
                const comments = document.getElementById('comments').value.trim();
                
                return this.assembleReview(aspects, staffName, comments);
            },
            
            getSelectedAspects() {
                const checked = document.querySelectorAll('input[type="checkbox"]:checked');
                return Array.from(checked).map(cb => CONFIG.aspects[cb.value]);
            },
            
            assembleReview(aspects, staffName, comments) {
                const parts = [];
                
                // Random opening
                const opening = CONFIG.openings[Math.floor(Math.random() * CONFIG.openings.length)];
                parts.push(`${opening} ${CONFIG.hotelName}!`);
                
                // Aspects (if any selected)
                if (aspects.length > 0) {
                    parts.push(this.formatAspects(aspects));
                } else {
                    parts.push('Everything about our stay was excellent and exceeded our expectations.');
                }
                
                // Staff recognition
                if (staffName) {
                    parts.push(`Special thanks to ${staffName} who made our stay extra special.`);
                }
                
                // Additional comments
                if (comments) {
                    parts.push(comments);
                }
                
                // Random closing
                const closing = CONFIG.closings[Math.floor(Math.random() * CONFIG.closings.length)];
                parts.push(closing);
                
                return parts.join('\n\n');
            },
            
            formatAspects(aspects) {
                if (aspects.length === 1) {
                    return aspects[0] + '.';
                }
                
                if (aspects.length === 2) {
                    // Capitalize first word of second aspect
                    const second = aspects[1].charAt(0).toLowerCase() + aspects[1].slice(1);
                    return aspects[0] + ' and ' + second + '.';
                }
                
                // For 3+ aspects, make a copy to avoid mutating original
                const aspectsCopy = [...aspects];
                const last = aspectsCopy.pop();
                const lastFormatted = last.charAt(0).toLowerCase() + last.slice(1);
                return aspectsCopy.join(', ') + ', and ' + lastFormatted + '.';
            }
        };

        // Clipboard Manager Module
        const ClipboardManager = {
            async copy(text) {
                try {
                    // Modern API
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        await navigator.clipboard.writeText(text);
                        this.showNotification();
                        return;
                    }
                    
                    // Fallback for older browsers
                    this.fallbackCopy(text);
                } catch (err) {
                    console.error('Copy failed:', err);
                    this.fallbackCopy(text);
                }
            },
            
            fallbackCopy(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                textarea.style.left = '-9999px';
                document.body.appendChild(textarea);
                
                textarea.focus();
                textarea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        this.showNotification();
                    }
                } catch (err) {
                    console.error('Fallback copy failed:', err);
                }
                
                document.body.removeChild(textarea);
            },
            
            showNotification() {
                const toast = document.getElementById('notification');
                toast.classList.remove('hidden');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 3000);
            }
        };

        // UI Controller
        const UIController = {
            init() {
                this.renderAspects();
                this.setupEventListeners();
                this.updateHotelName();
                
                // Debug: Log booking source
                console.log('Booking source detected:', BookingDetector.getSource());
            },
            
            renderAspects() {
                const grid = document.getElementById('aspects-grid');
                
                Object.entries(CONFIG.aspects).forEach(([key, description]) => {
                    const item = document.createElement('div');
                    item.className = 'checkbox-item';
                    item.innerHTML = `
                        <input type="checkbox" id="${key}" value="${key}">
                        <label for="${key}">${description}</label>
                    `;
                    
                    // Add click handler for the entire item
                    item.addEventListener('click', (e) => {
                        if (e.target.tagName !== 'INPUT') {
                            const checkbox = item.querySelector('input');
                            checkbox.checked = !checkbox.checked;
                            this.updateCheckboxStyle(item, checkbox.checked);
                        } else {
                            this.updateCheckboxStyle(item, e.target.checked);
                        }
                    });
                    
                    grid.appendChild(item);
                });
            },
            
            updateCheckboxStyle(item, checked) {
                if (checked) {
                    item.classList.add('checked');
                } else {
                    item.classList.remove('checked');
                }
            },
            
            setupEventListeners() {
                document.getElementById('generate-btn').addEventListener('click', this.handleGenerate.bind(this));
                document.getElementById('copy-btn').addEventListener('click', this.handleCopy.bind(this));
            },
            
            updateHotelName() {
                document.getElementById('hotel-name').textContent = CONFIG.hotelName;
                
                // Set logo if provided
                if (CONFIG.hotelLogo) {
                    const logoImg = document.getElementById('hotel-logo-img');
                    logoImg.src = CONFIG.hotelLogo;
                    logoImg.style.display = 'block';
                    logoImg.nextElementSibling.style.display = 'none';
                }
            },
            
            handleGenerate() {
                const review = ReviewBuilder.generate();
                document.getElementById('review-text').textContent = review;
                document.getElementById('review-output').classList.remove('hidden');
                this.setupPlatformButtons();
                
                // Smooth scroll to review
                document.getElementById('review-output').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            },
            
            handleCopy() {
                const review = document.getElementById('review-text').textContent;
                ClipboardManager.copy(review);
            },
            
            setupPlatformButtons() {
                const routing = BookingDetector.getPlatformRouting();
                
                // Primary platform
                const primaryBtn = document.getElementById('primary-platform');
                const primaryPlatform = CONFIG.platforms[routing.primary];
                primaryBtn.href = primaryPlatform.url;
                primaryBtn.innerHTML = `${primaryPlatform.emoji} Post on ${primaryPlatform.name}`;
                
                // Secondary platforms
                if (routing.secondary.length > 0) {
                    const container = document.getElementById('secondary-platforms');
                    const buttonsContainer = document.getElementById('secondary-buttons');
                    
                    // Clear existing buttons
                    buttonsContainer.innerHTML = '';
                    
                    routing.secondary.forEach(key => {
                        const platform = CONFIG.platforms[key];
                        const button = document.createElement('a');
                        button.href = platform.url;
                        button.target = '_blank';
                        button.rel = 'noopener';
                        button.className = 'platform-btn secondary';
                        button.innerHTML = `${platform.emoji} ${platform.name}`;
                        
                        buttonsContainer.appendChild(button);
                    });
                    
                    container.classList.remove('hidden');
                }
            }
        };

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            UIController.init();
        });
    </script>
</body>
</html>